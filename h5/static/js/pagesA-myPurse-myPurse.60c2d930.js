(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-myPurse-myPurse"],{"0cf5":function(t,i,e){"use strict";e.r(i);var n=e("6181"),a=e("109d");for(var o in a)"default"!==o&&function(t){e.d(i,t,function(){return a[t]})}(o);e("69e2");var s=e("2877"),l=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"13612427",null);i["default"]=l.exports},"109d":function(t,i,e){"use strict";e.r(i);var n=e("1239"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,function(){return n[t]})}(o);i["default"]=a.a},1239:function(t,i,e){"use strict";var n=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("7f7f");n(e("02c5"));var a=n(e("736b")),o=n(e("7f0f")),s=new o.default,l={data:function(){return{money:"0.00",moneyTx:"",Sofar:"",code:"",openid:"",wcopenid:"",hWxopenid:"",ID:"",name:"",wxname:"",choice:!0,display:!1,wxdisplay:!1,isAuth:!1,wxisAuth:!1,alipaysstate:"",weixinsstate:""}},onLoad:function(){var t=this,i=uni.getStorageSync("openid");console.log(i),i?t.openid=i:t.getuserToken()},onShow:function(){uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#ff5252",animation:{duration:400,timingFunc:"easeIn"}}),this.moneyQuery();var t=this;s.submit({request:{u:["USERSELFCONFIGALIPAY"],wx:["USERSELFCONFIGWEIXINPAY"],config:["APPLICATIONCONFIG"]},callback:function(i){var e=a.default.checkError(i,["u","wx","config"],function(t,i){uni.showToast({title:i,icon:"none"})});e.config&&(t.alipaysstate=e.config.alipay_withdraw_access.state,t.weixinsstate=e.config.weixin_pay_access.state),"MPJSAPI"==e.wx.trade_type&&(t.wxname=e.wx.realname,t.wxisAuth=!0),e.u.account&&(t.ID=e.u.account,t.name=e.u.realname,t.isAuth=!0)},error:function(t){console.log("出错啦",t)}})},methods:{goDetail:function(){uni.navigateTo({url:"../../pagesA/transactionDetail3/transactionDetail3"})},payAli:function(){var t=this,i=100*t.moneyTx;s.submit({request:{s:["USERWITHDRAWSELFADD",[{type:"user_money",value:i,method:"alipay",alipay_account:t.ID,alipay_realname:t.name}]]},callback:function(t){console.log(t);a.default.checkError(t,"s",function(t,i){uni.showToast({title:i,icon:"none"})});0==t.data.s.errno&&(uni.showToast({title:"已发起提现，待审核",icon:"none"}),setTimeout(function(){uni.navigateBack({url:"../../pages/me/me"})},2e3))},error:function(t){a.default.err("调用提现错误",t,1)}}),this.moneyQuery()},addpayAli:function(){uni.navigateTo({url:"../../pagesA/addpayAli/addpayAli"})},payWx:function(){var t=this,i=100*t.moneyTx;console.log("提现金额",i),console.log("我的账户",t.money),console.log(i<=0,i>t.money),i<=0||i>t.money||!/^\d+(\.\d+)?$/.test(i)?uni.showToast({title:"提现金额错误",icon:"none"}):(console.log("h5测试下"),t.tiXian(t.openid))},tiXian:function(t){var i=this,e=100*i.moneyTx;s.submit({request:{s:["USERWITHDRAWSELFADD",[{type:"user_money",value:e,comment:"提现",method:"weixinpay",weixin_login_openid:t,weixin_trade_type:"MPJSAPI"}]]},callback:function(t){a.default.checkError(t,"s",function(t,i){a.default.err("err",i)});t.data.s&&t.data.s.data&&uni.showToast({title:"已发起提现，待审核",success:function(){setTimeout(function(){uni.redirectTo({url:"../../pagesB/account/account"})},2e3)}}),console.log("tixian",t)},error:function(t){a.default.err("调用提现错误",t,1)}})},moneyQuery:function(){var t=this;s.submit({request:{s:["USERMONEYSELFTOTAL"]},callback:function(i){var e=a.default.checkError(i,"s",function(t,i){uni.showToast({title:i})});console.log("filter",e),e&&(t.money=e.s)},error:function(t){a.default.err("接口调用失败",t)}})},xz:function(t){var i=this;"z"==t?i.choice=!1:(console.log("选择微信"),i.choice=!0)},popBox:function(t){var i=this;0==t?i.display=!i.display:(i.wxdisplay=!i.wxdisplay,i.display=!i.display)},inpID:function(t){var i=this;i.ID=t.detail.value},inpName:function(t){var i=this;i.name=t.detail.value},wxinpName:function(t){console.log(t);var i=this;i.wxname=t.detail.value},wxopenid:function(t){var i=this;i.wxopenid=t.detail.value},next:function(t){var i=this;console.log(i.openid,"openid"),i.display=!i.display,1==t?(i.wxdisplay=!i.wxdisplay,s.submit({request:{u:["USERSELFCONFIGWEIXINPAY",[{realname:i.wxname,openid:i.openid,trade_type:"MPJSAPI"}]]},callback:function(t){console.log("用户微信信息",t);var e=a.default.checkError(t,"u",function(t,i){uni.showToast({title:i,icon:"none"})});e.u&&uni.showToast({title:"保存成功",icon:"none",success:function(){i.wxisAuth=!0}})},error:function(t){console.log("出错啦",t)}})):s.submit({request:{u:["USERSELFCONFIGALIPAY",[{account:i.ID,realname:i.name}]]},callback:function(t){console.log("用户支付宝信息",t);var e=a.default.checkError(t,"u",function(t,i){uni.showToast({title:i,icon:"none"})});e.u&&uni.showToast({title:"保存成功",icon:"none",success:function(){i.isAuth=!0}})},error:function(t){console.log("出错啦",t)}})},WithdrawBut:function(){console.log("点击提现按钮");var t=this;if(t.moneyTx<100)a.default.err("提现金额必须大于等于100元");else if(0==t.choice){if(console.log(11111),console.log("提现支付宝",t.isAuth),!t.isAuth)return void uni.showToast({title:"请设置支付宝信息",icon:"none",success:function(){t.display=!t.display}});""==t.ID?t.display=!t.display:uni.showModal({title:"提示",content:"你是否要提现"+t.moneyTx+"元到"+t.ID+"账号",success:function(i){i.confirm?t.payAli():i.cancel&&(t.display=!t.display)}})}else{if(console.log("提现微信",t.wxisAuth),!t.wxisAuth)return void uni.showToast({title:"请设置微信信息",icon:"none",success:function(){t.display=!t.display,t.wxdisplay=!t.wxdisplay}});""==t.wxname?(t.display=!t.display,t.wxdisplay=!t.wxdisplay):uni.showModal({title:"提示",content:"你是否要提现"+t.moneyTx+"元到"+t.wxname+"账号",success:function(i){i.confirm?t.payWx():i.cancel&&(t.display=!t.display)}})}},getuserToken:function(){var t=this;s.submit({request:{token:["SESSIONWEIXINACCESSTOKEN"]},callback:function(i){var e=a.default.checkError(i,"token",function(t,i){uni.showToast({title:"请先确认微信授权",icon:"none"})});e?t.openid=e.token.openid:(console.log("location",location.href),s.left_token(function(t){var i=encodeURIComponent(location.href),e=s.api_server_url+"?"+encodeURI('data=[["SESSIONWEIXINAUTHORIZE",[{"notify_url":"'+i+'"}]]]')+"&token="+t;console.log(e),location.href=e}))}})}}};i.default=l},"3a3a":function(t,i,e){var n=e("7544");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("3b7db03f",n,!0,{sourceMap:!1,shadowMode:!1})},6181:function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"conten"},[e("v-uni-view",{staticClass:"conten-top"},[e("v-uni-view",{staticClass:"conten-top-title"},[e("v-uni-text",[t._v(t._s(t.money/100))])],1),e("v-uni-view",{staticClass:"conten-top-text"},[e("v-uni-text",[t._v("可提现金额")])],1)],1),e("v-uni-view",{staticClass:"detail",on:{click:function(i){i=t.$handleEvent(i),t.goDetail(i)}}},[e("v-uni-text",[t._v("提现明细")]),e("v-uni-view",{staticClass:"detailedRight"},[e("v-uni-image",{staticClass:"detailedRightImg",attrs:{src:"http://rs.eonfox.cc/clzy/static/Arrow_right02.png"}})],1)],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.display,expression:"!display"}],staticClass:"withdrawDeposit"},[e("v-uni-view",{staticClass:"withdrawDeposit-title"},[e("v-uni-text",[t._v("请输入提现金额")])],1),e("v-uni-text",{staticClass:"abposin"},[t._v("￥")]),e("v-uni-view",{staticClass:"withdrawDeposit-box"},[e("v-uni-input",{attrs:{type:"digit",placeholder:"此处金额在100~10000间且每日提现不能超过三次","placeholder-style":"font-size:24upx"},model:{value:t.moneyTx,callback:function(i){t.moneyTx=i},expression:"moneyTx"}})],1),e("v-uni-view",{staticClass:"withdrawDeposit-text"},[e("v-uni-text",[t._v("请选择提现账户")])],1)],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.display,expression:"display"}],staticClass:"BopBox"},[e("v-uni-view",{staticClass:"informationBox"},[e("v-uni-view",{staticClass:"infor-title"},[e("v-uni-text",[t._v("支付宝账号:")])],1),e("v-uni-view",{staticClass:"infor-input"},[e("v-uni-input",{attrs:{type:"text",value:"",placeholder:t.ID},on:{input:function(i){i=t.$handleEvent(i),t.inpID(i)}}})],1)],1),e("v-uni-view",{staticClass:"informationBox"},[e("v-uni-view",{staticClass:"infor-title"},[e("v-uni-text",[t._v("真实姓名:")])],1),e("v-uni-view",{staticClass:"infor-input"},[e("v-uni-input",{attrs:{type:"text",value:"",placeholder:t.name},on:{input:function(i){i=t.$handleEvent(i),t.inpName(i)}}})],1)],1),e("v-uni-view",{staticClass:"affirmBut"},[e("v-uni-button",{attrs:{type:"primary"},on:{click:function(i){i=t.$handleEvent(i),t.next(0)}}},[t._v("确认")])],1)],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.wxdisplay,expression:"wxdisplay"}],staticClass:"BopBox"},[e("v-uni-view",{staticClass:"informationBox"},[e("v-uni-view",{staticClass:"infor-title"},[e("v-uni-text",[t._v("真实姓名:")])],1),e("v-uni-view",{staticClass:"infor-input"},[e("v-uni-input",{attrs:{type:"text",value:"",placeholder:t.wxname},on:{input:function(i){i=t.$handleEvent(i),t.wxinpName(i)}}})],1)],1),e("v-uni-view",{staticClass:"informationBox"},[e("v-uni-view",{staticClass:"infor-title"},[e("v-uni-text",[t._v("openid:")])],1),e("v-uni-view",{staticClass:"infor-input"},[e("v-uni-input",{attrs:{type:"text",value:"",disabled:"true",placeholder:t.openid},on:{input:function(i){i=t.$handleEvent(i),t.wxopenid(i)}}})],1)],1),e("v-uni-view",{staticClass:"affirmBut"},[e("v-uni-button",{attrs:{type:"primary"},on:{click:function(i){i=t.$handleEvent(i),t.next(1)}}},[t._v("确认")])],1)],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.display,expression:"!display"}],staticStyle:{float:"left",display:"flex",width:"100%","flex-direction":"column"}},[1==t.alipaysstate?e("v-uni-view",{staticClass:"payw"},[e("v-uni-image",{attrs:{src:"http://rs.eonfox.cc/clzy/static/ali_pay.png",mode:""}}),e("v-uni-text",{staticClass:"txt",on:{click:function(i){i=t.$handleEvent(i),t.popBox(0)}}},[t._v("支付宝")]),e("v-uni-label",{staticClass:"radio"},[e("v-uni-radio",{attrs:{value:"r1",checked:!t.choice},on:{click:function(i){i=t.$handleEvent(i),t.xz("z")}}})],1)],1):t._e(),1==t.weixinsstate?e("v-uni-view",{staticClass:"pay"},[e("v-uni-image",{attrs:{src:"http://rs.eonfox.cc/clzy/static/wechat.png",mode:""}}),e("v-uni-text",{staticClass:"txt",on:{click:function(i){i=t.$handleEvent(i),t.popBox(1)}}},[t._v("微信")]),e("v-uni-label",{staticClass:"radio"},[e("v-uni-radio",{attrs:{value:"r2",checked:t.choice},on:{click:function(i){i=t.$handleEvent(i),t.xz("w")}}})],1)],1):t._e()],1),e("v-uni-button",{directives:[{name:"show",rawName:"v-show",value:!t.display,expression:"!display"}],staticClass:"confirm-btn",on:{click:function(i){i=t.$handleEvent(i),t.WithdrawBut(i)}}},[t._v("提现")])],1)},a=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return a})},"69e2":function(t,i,e){"use strict";var n=e("3a3a"),a=e.n(n);a.a},7544:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".conten[data-v-13612427]{width:100%;height:100%}.conten-top[data-v-13612427]{width:100%;height:%?250?%;background-color:#ff5252;padding-top:%?80?%;color:#fff}.conten-top-text[data-v-13612427]{width:100%;height:%?50?%;text-align:center;font-size:%?32?%;margin-top:%?30?%}.conten-top-text uni-text[data-v-13612427]{font-size:%?32?%;color:#fff}.conten-top-title[data-v-13612427]{width:100%;height:%?50?%;text-align:center}.conten-top-title uni-text[data-v-13612427]{font-size:%?56?%;color:#fff}.detail[data-v-13612427]{float:left;width:calc(100% - %?20?%);height:%?100?%;border-bottom:1px solid #dedbdb;line-height:%?100?%;padding-left:%?20?%;font-size:%?32?%}.withdrawDeposit[data-v-13612427]{width:100%;height:%?300?%;font-size:%?28?%;float:left}.withdrawDeposit-title[data-v-13612427]{width:90%;color:#666;margin-left:10%;line-height:%?100?%;height:%?100?%}.withdrawDeposit-box[data-v-13612427]{width:87%;height:%?70?%;background-color:#e8e8e8;margin-left:10%;margin-top:%?10?%;line-height:%?70?%}.withdrawDeposit-box uni-input[data-v-13612427]{padding:%?10?% 0 0 %?5?%}.withdrawDeposit-text[data-v-13612427]{width:100%;height:%?70?%;text-align:center;line-height:%?70?%;margin-top:%?30?%}.payw[data-v-13612427]{\r\n\t/* float: left; */-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;width:calc(100% - %?30?%);height:%?100?%;border-top:1px #f5f5f5 solid;border-bottom:1px #f5f5f5 solid;line-height:%?100?%;font-size:%?28?%;margin-left:%?30?%}.pay[data-v-13612427]{\r\n\t/* float: left; */-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;width:calc(100% - %?30?%);height:%?100?%;border-bottom:1px #dedbdb solid;line-height:%?100?%;font-size:%?28?%;margin-left:%?30?%;margin-bottom:%?80?%}.abposin[data-v-13612427]{position:absolute;width:%?40?%;height:%?40?%;margin-left:%?15?%;font-size:%?48?%;margin-top:%?8?%}uni-image[data-v-13612427]{width:%?48?%;height:%?48?%;margin:%?20?% %?20?%;float:left}.txt[data-v-13612427]{width:%?510?%;height:%?100?%;line-height:%?100?%;float:left}.radio[data-v-13612427]{float:right;padding-right:%?50?%}.confirm-btn[data-v-13612427]{width:95%;\r\n\t/* height :55px; */color:#fff;margin-left:2.5%;background-color:#458b74;border-radius:4px}\r\n/* 弹出框样式 */.BopBox[data-v-13612427]{width:100%;height:%?400?%;position:absolute;background-color:#fff;z-index:1000}.BopBox-title[data-v-13612427]{width:100%;height:%?60?%;font-size:%?32?%;text-align:center}.informationBox[data-v-13612427]{width:100%;padding:%?5?%;height:%?80?%;line-height:%?80?%;border-bottom:#eee 1px solid;font-size:%?28?%}.infor-title[data-v-13612427]{float:left;width:25%;height:%?80?%;text-align:right}.infor-input[data-v-13612427]{padding-left:%?10?%;width:70%;height:%?50?%;float:left}.infor-input uni-input[data-v-13612427]{width:100%;float:left;height:%?80?%;line-height:%?80?%}.affirmBut[data-v-13612427]{width:95%;height:%?60?%;margin-top:%?80?%;margin-left:2.5%}.detailedRight[data-v-13612427]{width:44px;position:relative;right:10px;top:5px;float:right;text-align:right}.detailedRightImg[data-v-13612427]{width:20px;height:20px}",""])}}]);