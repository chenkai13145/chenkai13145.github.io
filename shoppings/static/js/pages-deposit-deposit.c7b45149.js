(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-deposit-deposit"],{"5a48":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"block"},[n("v-uni-view",{staticClass:"title"},[n("v-uni-text",[t._v("我的账户")]),n("v-uni-text",{staticStyle:{"font-size":"28rpx","padding-left":"60rpx",color:"#007AFF"},on:{click:function(e){e=t.$handleEvent(e),t.gominxi(e)}}},[t._v("交易明细")])],1),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"my"},[t._v("我的账户余额："+t._s(t.money/100)+" 元")])],1)],1),n("v-uni-view",{staticClass:"block"},[n("v-uni-view",{staticClass:"title"},[t._v("充值金额")]),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"amount"},[n("v-uni-view",{staticClass:"list"},t._l(t.amountList,function(e,i){return n("v-uni-view",{key:i,staticClass:"box",class:{on:e==t.inputAmount},on:{click:function(n){n=t.$handleEvent(n),t.select(e)}}},[t._v(t._s(e)+"元")])}),1),n("v-uni-view",{staticClass:"num"},[n("v-uni-view",{staticClass:"text"},[t._v("自定义充值金额")]),n("v-uni-view",{staticClass:"input"},[n("v-uni-input",{attrs:{type:"number"},model:{value:t.inputAmount,callback:function(e){t.inputAmount=e},expression:"inputAmount"}})],1)],1)],1)],1)],1),n("v-uni-view",{staticClass:"block"},[n("v-uni-view",{staticClass:"title"},[t._v("选择支付方式")]),n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"pay-list"},[n("v-uni-view",{staticClass:"row",on:{click:function(e){e=t.$handleEvent(e),t.paytype="wxpay"}}},[n("v-uni-view",{staticClass:"left"},[n("v-uni-image",{attrs:{src:"../../static/img/wxpay.png"}})],1),n("v-uni-view",{staticClass:"center"},[t._v("微信支付")]),n("v-uni-view",{staticClass:"right"},[n("v-uni-radio",{attrs:{checked:"wxpay"==t.paytype,color:"#70b162"}})],1)],1)],1)],1)],1),n("v-uni-view",{staticClass:"pay"},[n("v-uni-view",{staticClass:"btn",on:{click:function(e){e=t.$handleEvent(e),t.pay(e)}}},[t._v("立即充值")])],1),n("v-uni-view",{staticClass:"pay"},[n("v-uni-view",{staticClass:"btn btn-tixi",on:{click:function(e){e=t.$handleEvent(e),t.gopage(e)}}},[t._v("去提现")])],1)],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"630c":function(t,e,n){var i=n("ac8d");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("1c0dae9f",i,!0,{sourceMap:!1,shadowMode:!1})},"74b7":function(t,e,n){"use strict";n.r(e);var i=n("d283"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},"7a88":function(t,e,n){"use strict";var i=n("630c"),a=n.n(i);a.a},ac8d:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.block[data-v-b64b55d6]{width:94%;padding:%?20?% 3%}.block .title[data-v-b64b55d6]{width:100%;font-size:%?34?%}.block .content .my[data-v-b64b55d6]{width:100%;height:%?120?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-size:%?30?%;border-bottom:solid %?1?% #eee}.block .content .amount[data-v-b64b55d6]{width:100%}.block .content .amount .list[data-v-b64b55d6]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:%?20?% 0}.block .content .amount .list .box[data-v-b64b55d6]{width:30%;height:%?120?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-radius:%?10?%;-webkit-box-shadow:%?0?% %?5?% %?20?% rgba(0,0,0,.05);box-shadow:%?0?% %?5?% %?20?% rgba(0,0,0,.05);font-size:%?36?%;background-color:#f1f1f1;color:333}.block .content .amount .list .box.on[data-v-b64b55d6]{background-color:#4cd964;color:#fff}.block .content .amount .num[data-v-b64b55d6]{margin-top:%?10?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.block .content .amount .num .text[data-v-b64b55d6]{padding-right:%?10?%;font-size:%?30?%}.block .content .amount .num .input[data-v-b64b55d6]{width:28.2vw;border-bottom:solid %?2?% #999;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.block .content .amount .num .input uni-input[data-v-b64b55d6]{margin:0 %?20?%;height:%?60?%;font-size:%?30?%;color:#4cd964;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.block .content .pay-list[data-v-b64b55d6]{width:100%;border-bottom:solid %?1?% #eee}.block .content .pay-list .row[data-v-b64b55d6]{width:100%;height:%?120?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.block .content .pay-list .row .left[data-v-b64b55d6]{width:%?100?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.block .content .pay-list .row .left uni-image[data-v-b64b55d6]{width:%?80?%;height:%?80?%}.block .content .pay-list .row .center[data-v-b64b55d6]{width:100%;font-size:%?30?%}.block .content .pay-list .row .right[data-v-b64b55d6]{width:%?100?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}.pay[data-v-b64b55d6]{margin-top:%?20?%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.pay .btn[data-v-b64b55d6]{width:70%;height:%?80?%;border-radius:%?80?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;color:#fff;background-color:#4cd964;-webkit-box-shadow:%?0?% %?5?% %?10?% rgba(0,0,0,.2);box-shadow:%?0?% %?5?% %?10?% rgba(0,0,0,.2)}.pay .btn-tixi[data-v-b64b55d6]{color:#4cd964;background:#fff;border:%?1?% solid #4cd964}.pay .tis[data-v-b64b55d6]{margin-top:%?10?%;width:100%;font-size:%?24?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:baseline;-webkit-align-items:baseline;-ms-flex-align:baseline;align-items:baseline;color:#999}.pay .tis .terms[data-v-b64b55d6]{color:#5a9ef7}',""])},b3d9:function(t,e,n){"use strict";n.r(e);var i=n("5a48"),a=n("74b7");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("7a88");var s=n("2877"),l=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"b64b55d6",null);e["default"]=l.exports},d283:function(t,e,n){"use strict";var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("f499"));i(n("59ad"));n("6b54"),n("87b3");var o=i(n("7f0f")),s=i(n("736b")),l=new o.default,c={data:function(){return{money:0,inputAmount:"",amountList:[100,200,500],paytype:"wxpay"}},onShow:function(){this.load()},methods:{load:function(){var t=this;l.submit({request:{s:["USERMONEYSELFTOTAL"]},callback:function(e){console.log("预付款",e),0==e.data.s.errno&&(t.money=e.data.s.data)},error:function(t){console.log("出错啦",t)}})},onload:function(){var t=this;l.submit({request:{s:["USERMONEYSELFTOTAL"]},callback:function(e){console.log("预付款",e),0==e.data.s.errno&&(t.money=e.data.s.data,setTimeout(function(){uni.navigateBack({delta:1})},1e3))},error:function(t){console.log("出错啦",t)}})},select:function(t){this.inputAmount=t},doDeposit:function(){return"alipay"==this.paytype?void console.log("支付宝"):void console.log("微信")},pay:function(){var t=this;!/^\d+(\.\d+)?$/.test(t.inputAmount)||t.inputAmount<=0?uni.showToast({title:"请输入正确金额",icon:"none"}):("alipay"!=t.paytype&&t.WeChatPay(),"alipay"==t.paytype&&uni.showToast({title:"开发中。。。",icon:"none"}))},payAli:function(){var t=this;l.submit({request:{s:["APPLICATIONORDERSELFBUYUSERMONEY",[{money_fen:100*t.inputAmount,pay_method:"alipay",alipay_trade_type:"APP"}]]},callback:function(e){console.log("调起支付宝支付",e),s.default.checkError(e,"s",function(t,e){uni.showToast({title:e,icon:"none"})});var n=e.data.s.data.alipay;n&&uni.requestPayment({provider:"alipay",orderInfo:n,success:function(e){console.log("success:"+(0,a.default)(e)),t.onload(),uni.showToast({title:"充值成功",icon:"none"})},fail:function(t){console.log("fail:"+(0,a.default)(t))}})},error:function(t){s.default.err("提交订单失败",t,1)}})},WeChatPay:function(){var t=this,e=100*t.inputAmount;l.submit({request:{s:["SESSIONWEIXINACCESSTOKEN"]},callback:function(n){var i=s.default.checkError(n,"s",function(t,e){uni.showToast({title:"请先确认微信授权",icon:"none"})});console.log(i),i.s?l.submit({request:{s:["APPLICATIONORDERSELFBUYUSERMONEY",[{money_fen:e,pay_method:"weixinpay",weixin_trade_type:"MPJSAPI",weixin_login_openid:i.s.openid}]]},callback:function(e){console.log("调起微信支付",e);var n=s.default.checkError(e,"s",function(t,e){uni.showToast({title:e,icon:"none"})}),i=n.s;if(i){var a=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",o,function(t){"get_brand_wcpay_request:ok"==t.err_msg&&uni.showToast({title:"支付成功",success:function(){}}),"get_brand_wcpay_request:fail"==t.err_msg&&uni.showToast({title:"支付失败",icon:"none"}),"get_brand_wcpay_request:cancel"==t.err_msg&&uni.showToast({title:"已取消支付",icon:"none",success:function(){setTimeout(function(){uni.navigateBack({delta:1})},1500)}})})};console.log("ress",i);var o={appId:i.appid,timeStamp:String(i.time_stamp),nonceStr:i.nonce_str,package:"prepay_id="+i.prepay_id,signType:i.sign_type,paySign:i.pay_sign};console.log("getBrandWCPayRequest",o),"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",a,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",a),document.attachEvent("onWeixinJSBridgeReady",a)):a()}else console.log("提交订单失败",i),t.payWeChatPMJSAPI();console.log("提交订单",i)},error:function(t){console.log("提交订单失败",t,1)}}):(console.log("location",location.href),l.left_token(function(t){var e=encodeURIComponent(location.href),n=l.api_server_url+"?"+encodeURI('data=[["SESSIONWEIXINAUTHORIZE",[{"notify_url":"'+e+'"}]]]')+"&token="+t;console.log(n),location.href=n}))},error:function(t){s.default.err("err",t,1)}})},pay_APP_weixin:function(){var t=this;l.submit({request:{s:["APPLICATIONORDERSELFBUYUSERMONEY",[{money_fen:100*t.pay_money,pay_method:"weixinpay",weixin_trade_type:"APP"}]]},callback:function(e){console.log("商家",e),s.default.checkError(e,"s",function(e,n){uni.showToast({title:n,icon:"none"}),t.pay_switch=!1})&&(console.log("发起支付",e.data.s.data),t.requestPayment(e.data.s.data))},error:function(t){s.default.err("提交订单失败",t,1)}})},pay_mp_weixin:function(){var t=this;wx.login({success:function(e){t.code?(console.log("发起网络请求"),l.submit({request:{s:["APPLICATIONORDERSELFBUYUSERMONEY",[{money_fen:100*t.pay_money}]]},callback:function(e){console.log("商家",e),s.default.checkError(e,"s",function(e,n){uni.showToast({title:n,icon:"none"}),t.pay_switch=!1})&&(console.log("发起支付",e.data.s.data),t.requestPayment(e.data.s.data))},error:function(e){console.log("出错啦",e),uni.showToast({title:(0,a.default)(e),icon:"none"}),t.pay_switch=!1}})):(t.pay_switch=!1,console.log("登录失败！"+e.errMsg),uni.showToast({title:"登录失败！"+e.errMsg,icon:"none"}))},fail:function(){t.pay_switch=!1}})},requestPayment:function(t){var e=this;e.test="开始了";e=this;console.log("支付参数"+(0,a.default)(t)),console.log("调起支付"),e.test="调起支付",uni.requestPayment({success:function(n){if(console.log("成功success:"+(0,a.default)(n)),"requestPayment:ok"==n.errMsg){e.pay_switch=!1;var i=0,o=setInterval(function(){i++,i<=30?e.pay_result_query(t.order_id,function(){clearInterval(o),e.onload(),uni.showToast({title:"充值成功",icon:"none"})}):uni.showToast({title:"业务超时，如已支付，请稍后再个人页面查看是否到账",icon:"none"})},1e3)}else uni.showToast({title:"业务超时，如已支付，请稍后再个人页面查看是否到账",icon:"none"}),e.pay_switch=!1},fail:function(t){return e.pay_switch=!1,!1}})},pay_result_query:function(t,e){console.log("正在查询"),l.submit({request:{s:["APPLICATIONORDERSELFPAYSTATE",[{order_id:t}]]},callback:function(t){s.default.checkError(t,"s",function(t,e){return!1})&&e()},error:function(t){return 0}})},gominxi:function(){uni.navigateTo({url:"../../pagesA/transactionDetail2/transactionDetail2?method=user_money"})},gopage:function(){uni.navigateTo({url:"../../pagesA/myPurse/myPurse"})}},onLoad:function(){}};e.default=c}}]);