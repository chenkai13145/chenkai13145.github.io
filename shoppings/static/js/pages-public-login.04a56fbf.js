(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-public-login"],{"0252":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"left-bottom-sign"}),i("v-uni-view",{staticClass:"back-btn yticon icon-zuojiantou-up",on:{click:function(e){e=t.$handleEvent(e),t.navBack(e)}}}),i("v-uni-view",{staticClass:"right-top-sign"}),i("v-uni-view",{staticClass:"wrapper"},[i("v-uni-view",{staticClass:"left-top-sign"},[t._v("LOGIN")]),i("v-uni-view",{staticClass:"welcome"},[t._v("欢迎回来！")]),i("v-uni-view",{staticClass:"input-content"},[i("v-uni-view",{staticClass:"input-item"},[i("v-uni-text",{staticClass:"tit"},[t._v("手机号码")]),i("v-uni-input",{attrs:{type:"number",value:t.phone,placeholder:"请输入手机号码",maxlength:"11","data-key":"phone"},on:{input:function(e){e=t.$handleEvent(e),t.inputChange(e)}}})],1),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-text",{staticClass:"tit"},[t._v("密码")]),i("v-uni-input",{attrs:{type:"mobile",value:"",placeholder:"8~24位不含特殊字符的数字、字母组合","placeholder-class":"input-empty",maxlength:"20",password:"","data-key":"password"},on:{input:function(e){e=t.$handleEvent(e),t.inputChange(e)},confirm:function(e){e=t.$handleEvent(e),t.toLogin(e)}}})],1),t.verifyCode.isNeed?i("v-uni-view",{staticClass:"section_verify"},[i("v-uni-input",{staticClass:"verifyCodeText",attrs:{type:"text",maxlength:"6",placeholder:"请输入验证码","placeholder-style":"font-size:26upx"},model:{value:t.verifyCode.code,callback:function(e){t.$set(t.verifyCode,"code",e)},expression:"verifyCode.code"}}),i("v-uni-image",{staticClass:"verifyCodeImg",attrs:{src:t.verifyCode.codeImg},on:{click:function(e){e=t.$handleEvent(e),t.getVerifyImage()}}})],1):t._e()],1),i("v-uni-button",{staticClass:"confirm-btn",attrs:{disabled:t.logining},on:{click:function(e){e=t.$handleEvent(e),t.toLogin(e)}}},[t._v("登录")]),i("v-uni-view",{staticClass:"forget-section",on:{click:function(e){e=t.$handleEvent(e),t.toForget(e)}}},[t._v("忘记密码?")])],1),i("v-uni-view",{staticClass:"register-section"},[t._v("还没有账号?"),i("v-uni-text",{on:{click:function(e){e=t.$handleEvent(e),t.toRegist(e)}}},[t._v("马上注册")])],1)],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"0354":function(t,e,i){"use strict";i.r(e);var n=i("0252"),o=i("64e3");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("438e");var r=i("2877"),s=Object(r["a"])(o["default"],n["a"],n["b"],!1,null,"1ed7192a",null);e["default"]=s.exports},"438e":function(t,e,i){"use strict";var n=i("c279"),o=i.n(n);o.a},"64e3":function(t,e,i){"use strict";i.r(e);var n=i("eceb"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},c279:function(t,e,i){var n=i("deba");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("16220c42",n,!0,{sourceMap:!1,shadowMode:!1})},deba:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-1ed7192a]{background:#fff}.container[data-v-1ed7192a]{padding-top:115px;position:relative;width:100vw;height:100vh;overflow:hidden;background:#fff}.wrapper[data-v-1ed7192a]{position:relative;z-index:90;background:#fff;padding-bottom:%?40?%}.back-btn[data-v-1ed7192a]{position:absolute;left:%?40?%;z-index:9999;padding-top:0;top:%?40?%;font-size:%?40?%;color:#303133}.left-top-sign[data-v-1ed7192a]{font-size:%?120?%;color:#f8f8f8;position:relative;left:%?-16?%}.right-top-sign[data-v-1ed7192a]{position:absolute;top:%?80?%;right:%?-30?%;z-index:95}.right-top-sign[data-v-1ed7192a]:after,.right-top-sign[data-v-1ed7192a]:before{display:block;content:"";width:%?400?%;height:%?80?%;background:#b4f3e2}.right-top-sign[data-v-1ed7192a]:before{-webkit-transform:rotate(50deg);-ms-transform:rotate(50deg);transform:rotate(50deg);border-radius:0 50px 0 0}.right-top-sign[data-v-1ed7192a]:after{position:absolute;right:%?-198?%;top:0;-webkit-transform:rotate(-50deg);-ms-transform:rotate(-50deg);transform:rotate(-50deg);border-radius:50px 0 0 0\n    /* background: pink; */}.left-bottom-sign[data-v-1ed7192a]{position:absolute;left:%?-270?%;bottom:%?-320?%;border:%?100?% solid #d0d1fd;border-radius:50%;padding:%?180?%}.welcome[data-v-1ed7192a]{position:relative;left:%?50?%;top:%?-90?%;font-size:%?46?%;color:#555;text-shadow:1px 0 1px rgba(0,0,0,.3)}.input-content[data-v-1ed7192a]{padding:0 %?60?%}.input-item[data-v-1ed7192a]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:0 %?30?%;background:#f8f6fc;height:%?120?%;border-radius:4px;margin-bottom:%?50?%}.input-item[data-v-1ed7192a]:last-child{margin-bottom:0}.input-item .tit[data-v-1ed7192a]{height:%?50?%;line-height:%?56?%;font-size:%?26?%;color:#606266}.input-item uni-input[data-v-1ed7192a]{height:%?60?%;font-size:%?30?%;color:#303133;width:100%}.confirm-btn[data-v-1ed7192a]{width:%?630?%;height:%?76?%;line-height:%?76?%;border-radius:50px;margin-top:%?70?%;background:#fa436a;color:#fff;font-size:%?32?%}.confirm-btn[data-v-1ed7192a]:after{border-radius:100px}.forget-section[data-v-1ed7192a]{font-size:%?26?%;color:#4399fc;text-align:center;margin-top:%?40?%}.register-section[data-v-1ed7192a]{position:absolute;left:0;bottom:%?50?%;width:100%;font-size:%?26?%;color:#606266;text-align:center}.register-section uni-text[data-v-1ed7192a]{color:#4399fc;margin-left:%?10?%}.section_verify[data-v-1ed7192a]{width:100%;height:65px;margin:%?20?% auto;padding-left:10px;background:#f8f6fc;border-radius:%?10?%;position:relative;top:5px;line-height:65px}.verifyCodeText[data-v-1ed7192a]{width:90px;float:left;background:#f8f6fc;height:65px;line-height:65px}.verifyCodeImg[data-v-1ed7192a]{width:50%;height:65px;float:right}body.?%PAGE?%[data-v-1ed7192a]{background:#fff}',""])},eceb:function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("f499"));i("96cf");var a=n(i("3b8d")),r=n(i("cebc")),s=i("2f62"),d=n(i("7f0f")),c=(n(i("736b")),new d.default),l={data:function(){return{phone:"",password:"",logining:!1,verifyCodeImage:"",verifyCode:{isNeed:!1,codeImg:"",code:""}}},onLoad:function(){},methods:(0,r.default)({},(0,s.mapMutations)(["login"]),{inputChange:function(t){var e=t.currentTarget.dataset.key;this[e]=t.detail.value},navBack:function(){uni.switchTab({url:"/pages/index/index"})},toRegist:function(){uni.navigateTo({url:"/pages/public/register"})},toForget:function(){uni.navigateTo({url:"/pages/public/forget"})},toLogin:function(){var t=(0,a.default)(regeneratorRuntime.mark(function t(){var e,i,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this,i=this.phone,n=this.password,/^1\d{10}$/.test(i)?n.length<8||n.length>24?uni.showToast({title:"密码长度为8~24个字符",icon:"none"}):(e.isVerify(),a=1==e.verifyCode.isNeed?{phone:e.phone,password:e.password,image_verify_code:e.verifyCode.code,image_verify_key:"user/log_in"}:{phone:e.phone,password:e.password},c.submit({request:{s:["USERLOGIN",[a]]},callback:function(t){var i=t.data.s;i.errno?(e.verifyCode.isNeed&&e.getVerifyImage(),uni.showToast({title:i.error,icon:"none"})):uni.showToast({title:"登录成功",icon:"success",success:function(){c.submit({request:{u:["USERSELF",[{oauth_id:e.oauthid}]],p:["USERPHONESELFVERIFY"]},callback:function(t){console.log(t),uni.setStorage({key:"userinfo",data:t})}}),e.bind(),setTimeout(function(){uni.switchTab({url:"../../pages/user/user"})},1500)}}),console.log(t)},error:function(t){console.log("出错啦",t),uni.showToast({title:(0,o.default)(t),icon:"none"})}})):uni.showToast({title:"手机号有误",icon:"none"});case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),isVerify:function(t){console.log("检测是否需要验证码");var e=this,i=new d.default;i.submit({request:{s:["USERLOGINIMAGEVERIFYCODESTATE",[{phone:e.phone}]]},callback:function(t){if(console.log("检测结果：",t),t.errno)console.log("出错啦",t),uni.showToast({title:t.data.error,icon:"none"});else{if(console.log("验证码s：",t.data.s),!t.data.s.data)return;console.log("验证码需要：",t.data.s),e.verifyCode.isNeed=!0,e.getVerifyImage()}},error:function(){console.log("出错啦",err),uni.showToast({title:"出错啦",icon:"none"})}})},getVerifyImage:function(){var t=this,e=new d.default;e.left_token(function(i){var n=e.api_server_url+"?"+encodeURI('data=[["SESSIONIMAGEVERIFYCODESHOW",[{"image_verify_key":"user/log_in","bg_color_rand":0,"bg_color":[242,242,242],"length":5,"width":200,"height":44}]]]')+"&token="+i;t.verifyCode.codeImg=n})},bind:function(){var t=this;console.log("oauth"),uni.getStorage({key:"oauth",success:function(e){e.data&&t.bind_()}})},bind_:function(){console.log("bind")}})};e.default=l}}]);