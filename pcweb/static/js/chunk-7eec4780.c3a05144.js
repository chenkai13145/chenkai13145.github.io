(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7eec4780"],{"08d9":function(e,t,i){"use strict";var a=i("defc"),l=i.n(a);l.a},"0b3f":function(e,t,i){},"3e8e":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"Picturepreview"},[e.infoSuObjOff?e._e():[i("el-card",{staticClass:"main"},[i("el-form",{staticClass:"me_from demo-form-inline",attrs:{inline:!0,model:e.queryfrom}},[i("el-form-item",[i("el-select",{staticStyle:{width:"190px"},attrs:{placeholder:"请选择项目"},model:{value:e.queryfrom.projectId,callback:function(t){e.$set(e.queryfrom,"projectId",t)},expression:"queryfrom.projectId"}},[i("el-option",{attrs:{label:"全部",value:""}}),e._l(e.$store.getters.projectAll,(function(e,t){return i("el-option",{key:e.projectId+t+"s"+e.projectName,attrs:{label:e.projectName,value:e.projectId}})}))],2)],1),i("el-form-item",[i("el-select",{staticStyle:{width:"190px"},attrs:{placeholder:"请选择状态"},model:{value:e.queryfrom.status,callback:function(t){e.$set(e.queryfrom,"status",t)},expression:"queryfrom.status"}},[i("el-option",{attrs:{label:"全部",value:0}}),i("el-option",{attrs:{label:"认购保存",value:1}}),i("el-option",{attrs:{label:"认购提交",value:2}}),i("el-option",{attrs:{label:"认购审核通过",value:3}}),i("el-option",{attrs:{label:"认购审核拒绝",value:4}}),i("el-option",{attrs:{label:"认购退定",value:5}}),i("el-option",{attrs:{label:"业绩保存",value:6}}),i("el-option",{attrs:{label:"业绩提交",value:7}}),i("el-option",{attrs:{label:"业绩审核通过",value:8}}),i("el-option",{attrs:{label:"业绩审核拒绝",value:9}}),i("el-option",{attrs:{label:"业绩退房",value:10}})],1)],1),i("el-form-item",[i("el-date-picker",{staticStyle:{width:"290px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"选择开始时间","end-placeholder":"选择结束时间"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),i("el-form-item",[i("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"客户名和房号"},model:{value:e.queryfrom.keyWord,callback:function(t){e.$set(e.queryfrom,"keyWord",t)},expression:"queryfrom.keyWord"}})],1),i("el-form-item",[i("el-button",{staticStyle:{background:"#0b8d7e",border:"none"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("搜索")]),i("el-button",{staticStyle:{background:"#f1420ef7",border:"none"},attrs:{type:"primary"},on:{click:e.AddPic}},[e._v("添加成交单")])],1)],1)],1),i("el-card",{staticStyle:{"margin-top":"20px"}},[i("header",{staticStyle:{"font-weight":"800","padding-bottom":"8px",color:"#000"}},[e._v("代理成交单列表")]),i("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{height:"410","cell-style":e.cellStyle,"header-cell-style":{background:"#edfaf8",color:"#333333"},"row-class-name":e.tableRowClassName,data:e.tableData,border:""}},[i("el-table-column",{attrs:{prop:"customName",label:"客户姓名",width:"100"}}),i("el-table-column",{attrs:{prop:"customerPhone",label:"客户电话",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.preMobile+t.row.midMobile+t.row.sufMobile)+" ")]}}],null,!1,2647711322)}),i("el-table-column",{attrs:{prop:"tradeTime",width:"180",label:"认购日期"}}),i("el-table-column",{attrs:{prop:"projectName",label:"楼盘"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.projectName)+" "+e._s(t.row.roomNo))]}}],null,!1,3119413820)}),i("el-table-column",{attrs:{prop:"departmentName",label:"门店"}}),i("el-table-column",{attrs:{prop:"statusStr",label:"状态",width:"130"}}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleClick(t.row)}}},[e._v("详情")])]}}],null,!1,1997903706)})],1),i("Pagination",{attrs:{paginationData:e.paginationData},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1),i("addPic",{attrs:{type:"代理成交单录入",dialogVisible:e.addPicOff}})],e.infoSuObjOff?i("infoSuccess",{attrs:{type:"成交单详细",edit:!0,infoSuObj:e.infoSuccessData},on:{EidtPic:e.EidtPic,InvoiceOffFN:function(t){e.infoSuObjOff=!1}}}):e._e(),i("editPic",{ref:"editPic",attrs:{infoSuccessData:e.infoSuccessData,dialogVisible:e.editPicOff}})],2)},l=[],n=(i("1a8c"),i("4624")),r=i("7cc0"),o=i("07f3"),c=i("cf45"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"infoSuccess"},[a("el-card",{staticClass:"title"},[a("img",{attrs:{src:i("8eb8")}}),a("span",{on:{click:function(t){return e.$emit("InvoiceOffFN")}}},[e._v("返回开票详情")]),a("b",[e._v("详情")])]),a("div",{staticClass:"scoll_context"},["业绩单详细"===e.type?e._l(e.arrFn,(function(t,i){return a("el-card",{key:i,staticClass:"infoSuccess_card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(t.title))])]),a("el-row",{staticClass:"infoSuccess",attrs:{gutter:6}},[a("el-col",{attrs:{span:12}},e._l(t.one,(function(t,i){return a("div",{key:i,class:"picUrls"===t.key||"picUrls2"===t.key||"eleUrls"===t.key?"itemImg":"item"},[a("div",[e._v(e._s(t.title)+":")]),"picUrls"===t.key||"picUrls2"===t.key||"eleUrls"===t.key?a("div",e._l(t.text,(function(t){return a("img",{key:t,staticClass:"imgs",attrs:{src:t},on:{click:function(i){return e.imgFn(t)}}})})),0):a("div",[e._v(e._s(t.text))])])})),0),a("el-col",{attrs:{span:12}},e._l(t.two,(function(t,i){return a("div",{key:i,class:"picUrls"===t.key||"picUrls2"===t.key||"eleUrls"===t.key?"itemImg":"item"},[a("div",[e._v(e._s(t.title)+":")]),"picUrls"===t.key||"picUrls2"===t.key||"eleUrls"===t.key?a("div",e._l(t.text,(function(t){return a("img",{key:t,staticClass:"imgs",attrs:{src:t},on:{click:function(i){return e.imgFn(t)}}})})),0):a("div",[e._v(e._s(t.text))])])})),0)],1)],1)})):e._e(),"成交单详细"===e.type?[e._l(e.arrsFn,(function(t,i){return a("el-card",{key:i,staticClass:"infoSuccess_card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(t.title))])]),a("el-row",{staticClass:"infoSuccess",attrs:{gutter:6}},[a("el-col",{attrs:{span:12}},e._l(t.one,(function(t,i){return a("div",{key:i,class:"picUrls"===t.key||"picUrls2"===t.key||"eleUrls"===t.key?"itemImg":"item"},[a("div",[e._v(e._s(t.title)+":")]),"picUrls"===t.key||"picUrls2"===t.key||"eleUrls"===t.key?a("div",e._l(t.text,(function(t){return a("img",{key:t,staticClass:"imgs",attrs:{src:t},on:{click:function(i){return e.imgFn(t)}}})})),0):a("div",[e._v(e._s(t.text))])])})),0),a("el-col",{attrs:{span:12}},e._l(t.two,(function(t,i){return a("div",{key:i,class:"picUrls"===t.key||"picUrls2"===t.key||"eleUrls"===t.key?"itemImg":"item"},[a("div",[e._v(e._s(t.title)+":")]),"picUrls"===t.key||"picUrls2"===t.key||"eleUrls"===t.key?a("div",e._l(t.text,(function(t){return a("img",{key:t,staticClass:"imgs",attrs:{src:t},on:{click:function(i){return e.imgFn(t)}}})})),0):a("div",[e._v(e._s(t.text))])])})),0)],1)],1)})),e.edit&&1==e.infoSuObj.checkStatus&&e.$store.getters.userinfo.realName===e.infoSuObj.createrName?[a("el-card",{attrs:{"body-style":"text-align: center;"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.EidtPic(t)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.examineFn}},[e._v("提交")])],1)]:e._e(),!e.edit||4!=e.infoSuObj.checkStatus&&6!=e.infoSuObj.checkStatus||e.$store.getters.userinfo.realName!==e.infoSuObj.createrName?e._e():[a("el-card",{attrs:{"body-style":"text-align: center;"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-edit"},nativeOn:{click:function(t){return e.EidtPic(t)}}},[e._v("重新编辑")])],1)]]:e._e()],2),a("Picview",{attrs:{dialogVisible:e.PicviewOff}})],1)},u=[],f=(i("7ae7"),i("af82"),i("4045"),i("9a14"),i("2ef9")),m=i("e7df"),d=i("3944"),y={components:{Picview:m["a"],examine:d["a"]},props:{infoSuObj:{type:Object},edit:{type:Boolean,default:!1},type:{type:String}},data:function(){return{data:{ticketId:3,projectId:4,departmentId:123,agentId:"",preMobile:"",midMobile:"",sufMobile:"",tradeTime:"2018-08-23",area:"",cycleDays:160,h:2e4,canCommission:15e3,createTime:"2018-08-23",createrName:"",createId:"",commitTime:"2018-08-23",checkStatus:2,payStatus:"",checkName:"",checkTime:"",reason:"",createId2:"",checkTime2:"",ticketStatus:1,isElectron:0,eleUrls:["",""],groupSumMoney:6e5,groupCanMoney:3e5,cardMoney:1e4,tradeRemark:"xxx",achiRemark:"XXX",payCash:0,isAgency:0},arr:[{title:"认购信息",one:[{title:"客户名称",text:"",key:"customName"},{title:"楼盘",text:"",key:"projectName"},{title:"房号",text:"",key:"roomNo"},{title:"经纪人",text:"",key:"agentName"},{title:"成交金额",text:"",key:"sumMoney",lable:"元"},{title:"税后金额",text:"",key:"commSumMoney",lable:"元"},{title:"成交凭证",text:"",key:"picUrls"},{title:"创建人",text:"",key:"createrName2"},{title:"创建时间",text:"",key:"createTime2"}],two:[{title:"门店总佣金",text:"",key:"sumCommission",lable:"元"},{title:"门店佣金方案",text:"",key:"commCase"},{title:"门店前佣",text:"",key:"preCommission",lable:"元"},{title:"门店后佣",text:"",key:"sufCommission",lable:"元"},{title:"门店现金奖",text:"",key:"cash",lable:"元"},{title:"门店是否支付",text:"是",key:"payCash"},{title:"门店已结",text:"",key:"hasCommission",lable:"元"},{title:"营收",text:"",key:"revenue",lable:"元"},{title:"审核人",text:"",key:"checkName2"},{title:"审核时间",text:"",key:"checkTime2"}]},{title:"业绩信息",one:[{title:"门店",text:"",key:"departmentName"},{title:"认购日期",text:"",key:"tradeTime"},{title:"面积",text:"",key:"area"},{title:"团购费实收",text:"",key:"groupSumMoney",lable:"元"},{title:"团购费可结",text:"",key:"groupCanMoney",lable:"元"},{title:"团购凭证",text:"",key:"eleUrls"},{title:"审核人",text:"",key:"checkName"},{title:"审核时间",text:"",key:"commitTime"}],two:[{title:"草签日期",text:"",key:"signTime"},{title:"佣金方案",text:"",key:"commCase",lable:"元"},{title:"总创佣",text:"",key:"kfsSumCommission",lable:"元"},{title:"开发商已结",text:"",key:"kfsh",lable:"元"},{title:"开发商未结",text:"",key:"kfsUnCommission",lable:"元"},{title:"业绩凭证",text:"",key:"picUrls2"},{title:"备注",text:"",key:"achiRemark"},{title:"创建人",text:"",key:"createrName2"},{title:"创建时间",text:"",key:"checkTime2"}]}],arrs:[{title:"成交单详细",one:[{title:"楼盘",text:"",key:"projectName"},{title:"门店",text:"",key:"departmentName"},{title:"经纪人",text:"",key:"agentName"},{title:"客户姓名",text:"",key:"customName"},{title:"客户电话",text:"",key:"customerPhone"},{title:"认购日期",text:"",key:"tradeTime"},{title:"房号",text:"",key:"roomNo",lable:"号"},{title:"面积",text:"",key:"area",lable:"m*2"},{title:"成交金额",text:"",key:"sumMoney",lable:"元"},{title:"税后金额",text:"",key:"commSumMoney",lable:"元"},{title:"团购费实收",text:"",key:"groupSumMoney",lable:"元"},{title:"团购费可结",text:"",key:"groupCanMoney",lable:"元"},{title:"认购备注",text:"",key:"tradeRemark"},{title:"成交凭证",text:"",key:"picUrls"}],two:[{title:"团购凭证",text:"",key:"eleUrls"},{title:"创建人",text:"",key:"createrName"},{title:"创建时间",text:"",key:"createTime"},{title:"状态",text:"",key:"statusStr"},{title:"提交时间",text:"",key:"commitTime"},{title:"审核人",text:"",key:"checkName"},{title:"审核时间",text:"",key:"checkTime"},{title:"原因",text:"",key:"reason"}]}],PicviewOff:{trunoff:!1,urlSrc:null},examineOff:{trunoff:!1},examineOffs:{trunoff:!1}}},computed:{arrFn:function(){var e=this,t=[];return this.arr.forEach((function(e){t=[].concat(Object(f["a"])(t),Object(f["a"])(e.one),Object(f["a"])(e.two))})),t.forEach((function(t){void 0!=t.lable?t.text=null==e.infoSuObj[t.key]||void 0==e.infoSuObj[t.key]?0+t.lable:e.infoSuObj[t.key]+t.lable:-1!=t.key.indexOf("Time")?t.text=Object(c["b"])(e.infoSuObj[t.key]):"经纪人"===t.title?t.text=e.infoSuObj[t.key]+e.infoSuObj.agentPhone:t.text=e.infoSuObj[t.key]})),this.arr},arrsFn:function(){var e=this,t=[];this.arrs.forEach((function(e){t=[].concat(Object(f["a"])(t),Object(f["a"])(e.one),Object(f["a"])(e.two))}));return t.forEach((function(t){void 0!=t.lable?t.text=null==e.infoSuObj[t.key]||void 0==e.infoSuObj[t.key]?0+t.lable:e.infoSuObj[t.key]+t.lable:-1!=t.key.indexOf("Time")?t.text=Object(c["b"])(e.infoSuObj[t.key]):"客户电话"==t.title?t.text=e.infoSuObj.preMobile+e.infoSuObj.midMobile+e.infoSuObj.sufMobile:t.text=e.infoSuObj[t.key]})),this.arrs}},methods:{EidtPic:function(){var e=this;this.$nextTick((function(){e.$emit("EidtPic")}))},examineFn:function(){var e=this;this.$confirm("确认提交, 是否继续?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){Object(r["f"])({ticketId:e.infoSuObj.ticketId}).then((function(t){"000"===t.data.code&&(e.$parent.handleClick(e.infoSuObj),e.$parent.onSubmit(),e.$message.success("提交成功"))}))}))},imgFn:function(e){this.PicviewOff.trunoff=!0,this.PicviewOff.urlSrc=e},Picturepreview:function(e){switch(e){case 1:this.examineOff.trunoff=!0;break;case 2:this.examineOffs.trunoff=!0;break;case 3:this.examineOffs.trunoff=!0;break;default:break}}}},k=y,b=(i("08d9"),i("e90a")),p=Object(b["a"])(k,s,u,!1,null,null,null),h=p.exports,x=i("78ee"),v=i("3aae"),S=i("c398"),g={mixins:[n["a"]],components:{infoSuccess:h,addPic:x["a"],editPic:v["a"],addchieve:S["a"]},data:function(){return{selctAll:[],value1:"",queryfrom:{projectId:"",status:"",keyWord:"",pageNo:1,pageSize:10,beginTime:"",endTime:""},paginationData:{pageSize:10,currentPage:1,total:100},tableData:[{ticketId:2,customName:"客户姓名",preMobile:"",midMobile:"",sufMobile:"",projectId:23,projectName:"",departmentId:123,departmentName:"",agentName:"",agentPhone:"18938766656",agentId:"",tradeTime:"",checkTime:"",commitTime:"",checkStatus:1,payStatus:1,roomNo:"房号",ticketStatus:1,checkStatus2:1,statusStr:"认购保存"}],infoSuccessData:null,infoSuObjOff:!1,addPicOff:{trunoff:!1},editPicOff:{trunoff:!1}}},methods:{handleCurrentChange:function(e){this.queryfrom.pageNo=e,this.paginationData.currentPage=e,this.requestLsit()},handleSizeChange:function(e){this.queryfrom.pageSize=e,this.paginationData.pageSize=e,this.requestLsit()},requestLsit:function(){var e=this;Object(r["b"])(this.queryfrom).then((function(t){"000"===t.data.code&&(e.tableData=t.data.bizData.items.map((function(e){return e.tradeTime=Object(c["b"])(e.createTime),e})),e.paginationData.total=t.data.bizData.total)}))},onSubmit:function(){this.queryfrom.pageSize=10,this.queryfrom.pageNo=1,this.requestLsit()},AddPic:function(){this.addPicOff.trunoff=!0},handleClick:function(e){var t=this;Object(o["p"])({ticketId:e.ticketId}).then((function(i){t.infoSuObjOff=!0,"000"===i.data.code&&(i.data.bizData.statusStr=e.statusStr,t.infoSuccessData=i.data.bizData,t.$store.dispatch("PicTickDieal",{data:i.data.bizData,item:e}))}))},EidtPic:function(){this.editPicOff.trunoff=!0}},mounted:function(){this.requestLsit()},watch:{value1:{handler:function(){if(null==this.value1)return this.queryfrom.beginTime="",this.queryfrom.endTime="",!0;this.queryfrom.beginTime=Object(c["b"])(this.value1[0]),this.queryfrom.endTime=Object(c["b"])(this.value1[1])}}}},O=g,j=(i("4a64"),Object(b["a"])(O,a,l,!1,null,"657a2b44",null));t["default"]=j.exports},"4a64":function(e,t,i){"use strict";var a=i("0b3f"),l=i.n(a);l.a},defc:function(e,t,i){}}]);
//# sourceMappingURL=chunk-7eec4780.c3a05144.js.map