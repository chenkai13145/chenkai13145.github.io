{"version":3,"sources":["webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./src/views/common/common.vue?97dd","webpack:///./src/api/commom.js","webpack:///./src/api/user.js","webpack:///src/views/common/common.vue","webpack:///./src/views/common/common.vue?97f0","webpack:///./src/views/common/common.vue","webpack:///./src/views/common/common.vue?34db","webpack:///./src/views/common/By2.mp3","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./node_modules/core-js/internals/sloppy-array-method.js"],"names":["global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","$forEach","sloppyArrayMethod","module","exports","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","attrs","domProps","on","$event","target","composing","content","_s","$store","getters","users","layout","login","postXin","_l","item","index","key","time","paiming","style","bgcolor","one","_f","text","copy","_id","id","userid","stopPropagation","delposts","_e","it","indexs","pageLoading","class","music","play","ref","mpvide","beforeClose","winWidth","model","callback","$$v","show","email","password","staticRenderFns","getAll","data","request","url","method","params","postFa","delpost","logReg","arrcom","postId","Query","size","page","loadingPage","$nextTick","mounted","window","innerWidth","document","body","clientWidth","getAllCom","methods","$refs","audio","then","res","status","da","reg","$toast","done","filters","component","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","fails","METHOD_NAME","argument"],"mappings":"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","file":"js/chunk-bf586336.faae1048.js","sourcesContent":["var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = sloppyArrayMethod('forEach') ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"common\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"留言板\")]),_c('div',{staticClass:\"postcom\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"}],attrs:{\"rows\":\"6\"},domProps:{\"value\":(_vm.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}}),_c('div',{staticClass:\"top\"},[_c('span',[_vm._v(_vm._s(_vm.$store.getters.users.name?'欢迎~~'+_vm.$store.getters.users.name:'请先登录'))]),(_vm.$store.getters.users.name)?_c('span',{staticClass:\"login\",on:{\"click\":_vm.layout}},[_vm._v(\"退出\")]):_c('span',{staticClass:\"login\",on:{\"click\":_vm.login}},[_vm._v(\"登录\")])]),_c('van-button',{attrs:{\"plain\":\"\",\"type\":\"primary\"},on:{\"click\":_vm.postXin}},[_vm._v(\"发表评论\")]),_c('div',{staticClass:\"bottomshow\"},[_vm._l((_vm.arrcom),function(item,index){return _c('div',{key:item.time+index,staticClass:\"show\"},[_c('div',{staticClass:\"numbers\"},[_vm._v(_vm._s(item.paiming)+\"楼\")]),_c('div',{staticClass:\"com\"},[_c('div',[_c('div',{staticClass:\"icon\",style:('background-color:'+item.bgcolor+'; width: 50PX; height: 50PX;')},[_vm._v(_vm._s(item.one))])]),_c('div',{staticClass:\"hoshow\"},[_c('div',[_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(item.name)+\" (\"+_vm._s(_vm._f(\"filters\")(item.time))+\")\")]),_c('p',{staticClass:\"texts\"},[_vm._v(_vm._s(item.text))]),_c('p',{staticClass:\"huifu\",on:{\"click\":function($event){return _vm.copy(item._id,item.name)}}},[_vm._v(\"回复\"),(_vm.$store.getters.users.id!==undefined&&_vm.$store.getters.users.id===item.userid)?_c('strong',{staticClass:\"del\",on:{\"click\":function($event){$event.stopPropagation();return _vm.delposts(item._id)}}},[_vm._v(\"删除\")]):_vm._e()])]),_vm._l((item.comment),function(it,indexs){return _c('div',{key:it._id+indexs,staticClass:\"hoshow hoshows\"},[_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(it.name)+\" (\"+_vm._s(_vm._f(\"filters\")(it.time))+\")\")]),_c('p',{staticClass:\"texts\"},[_vm._v(_vm._s(it.text))]),_c('p',{staticClass:\"huifu\",on:{\"click\":function($event){return _vm.copy(item._id,item.name)}}},[_vm._v(\"回复\")])])})],2)])])}),_c('van-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loadingPage),expression:\"loadingPage\"}],staticClass:\"jiazaibtn\",attrs:{\"plain\":\"\",\"type\":\"primary\"},on:{\"click\":_vm.pageLoading}},[_vm._v(\"加载更多\")])],2),_c('van-icon',{class:[_vm.music?'dsad musicadd':'musicadd'],attrs:{\"name\":\"music-o\",\"size\":\"40\"},on:{\"click\":_vm.play}}),_c('audio',{ref:\"audio\",attrs:{\"muted\":\"muted\",\"src\":_vm.mpvide,\"hidden\":\"\",\"loop\":\"\"}})],1),_c('van-dialog',{attrs:{\"beforeClose\":_vm.beforeClose,\"title\":\"登录\",\"width\":_vm.winWidth>600?600:320,\"show-cancel-button\":\"\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('form',[_c('van-cell-group',[_c('van-field',{attrs:{\"required\":\"\",\"clearable\":\"\",\"label\":\"用户名\",\"placeholder\":\"请输入用户名\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('van-field',{attrs:{\"type\":\"email\",\"label\":\"邮箱\",\"placeholder\":\"请输入邮箱\",\"required\":\"\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"label\":\"密码\",\"placeholder\":\"请输入密码\",\"required\":\"\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from'@/request/request.js'\r\n\r\nexport function getAll(data){\r\n    return request({\r\n        url:'/all',\r\n        method:'get',\r\n        params:data\r\n    })\r\n}\r\nexport function postFa(data){\r\n    return request({\r\n        url:'/post',\r\n        method:'post',\r\n        data\r\n    })\r\n}\r\nexport function delpost(data){\r\n    return request({\r\n        url:'/delete',\r\n        method:'post',\r\n        data\r\n    })\r\n}","import request from'@/request/request.js'\r\n\r\nexport function logReg(data){\r\n      return request({\r\n          url:'/logReg',\r\n          method:'post',\r\n          data\r\n      })\r\n}","<template>\r\n  <div class=\"common\">\r\n    <p class=\"title\">留言板</p>\r\n    <div class=\"postcom\">\r\n      <textarea rows=\"6\" v-model=\"content\"></textarea>\r\n      <div class=\"top\">\r\n        <span>{{$store.getters.users.name?'欢迎~~'+$store.getters.users.name:'请先登录'}}</span>\r\n        <span @click=\"layout\" v-if=\"$store.getters.users.name\" class=\"login\">退出</span>\r\n        <span @click=\"login\" v-else class=\"login\">登录</span>\r\n      </div>\r\n      <van-button plain type=\"primary\" @click=\"postXin\">发表评论</van-button>\r\n      <!-- 展示评论 -->\r\n      <div class=\"bottomshow\">\r\n        <div class=\"show\" v-for=\"(item,index) in arrcom\" :key=\"item.time+index\">\r\n          <div class=\"numbers\">{{item.paiming}}楼</div>\r\n          <div class=\"com\">\r\n            <div>\r\n              <div\r\n                class=\"icon\"\r\n                :style=\"'background-color:'+item.bgcolor+'; width: 50PX; height: 50PX;'\"\r\n              >{{item.one}}</div>\r\n            </div>\r\n            <div class=\"hoshow\">\r\n              <div>\r\n                <p class=\"name\">{{item.name}}&nbsp;&nbsp;({{item.time|filters}})</p>\r\n                <p class=\"texts\">{{item.text}}</p>\r\n                <p class=\"huifu\" @click=\"copy(item._id,item.name)\">回复<strong v-if=\"$store.getters.users.id!==undefined&&$store.getters.users.id===item.userid\" @click.stop=\"delposts(item._id)\" class=\"del\">删除</strong></p>\r\n              </div>\r\n              <div class=\"hoshow hoshows\" v-for=\"(it,indexs) in item.comment\" :key=\"it._id+indexs\">\r\n                <p class=\"name\">{{it.name}}&nbsp;&nbsp;({{it.time|filters}})</p>\r\n                <p class=\"texts\">{{it.text}}</p>\r\n                <p class=\"huifu\" @click=\"copy(item._id,item.name)\">回复</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <van-button plain type=\"primary\" v-show='loadingPage' @click=\"pageLoading\" class=\"jiazaibtn\">加载更多</van-button>\r\n      </div>\r\n      <van-icon @click=\"play\" :class=\"[music?'dsad musicadd':'musicadd']\" name=\"music-o\" size=\"40\" />\r\n      <audio ref=\"audio\" muted='muted' :src=\"mpvide\" hidden loop></audio>\r\n    </div>\r\n    <!-- 弹窗 -->\r\n    <van-dialog v-model=\"show\" :beforeClose=\"beforeClose\" title=\"登录\" :width=\"winWidth>600?600:320\" show-cancel-button>\r\n      <form>\r\n        <van-cell-group>\r\n          <van-field\r\n            v-model=\"name\"\r\n            required\r\n            clearable\r\n            label=\"用户名\"\r\n            placeholder=\"请输入用户名\"\r\n          />\r\n          <van-field v-model=\"email\" type=\"email\" label=\"邮箱\" placeholder=\"请输入邮箱\" required />\r\n          <van-field v-model=\"password\" type=\"password\" label=\"密码\" placeholder=\"请输入密码\" required />\r\n        </van-cell-group>\r\n      </form>\r\n    </van-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getAll,postFa,delpost } from \"@/api/commom.js\";\r\nimport {logReg} from '@/api/user.js'\r\nimport jwt_decode from 'jwt-decode'\r\nexport default {\r\n  data() {\r\n    return {\r\n      music: true,\r\n      arrcom: [],\r\n      show: false,\r\n      winWidth: null,\r\n      name:'',\r\n      password:'',\r\n      email:'',\r\n      content:'',\r\n      postId:'',\r\n      Query:{\r\n        size:10,\r\n        page:0\r\n      },\r\n      loadingPage:true,\r\n      mpvide:require(\"./By2.mp3\")\r\n    };\r\n  },\r\n   deactivated(){\r\n   this.music=true\r\n   this.$refs.audio.pause();\r\n },\r\n activated(){\r\n    this.$nextTick(()=>{\r\n       this.play()\r\n    })\r\n },\r\n  mounted() {\r\n    // 获取窗口宽度\r\n    if (window.innerWidth) {\r\n      this.winWidth = window.innerWidth;\r\n    } else if (document.body && document.body.clientWidth) {\r\n      this.winWidth = document.body.clientWidth;\r\n    }\r\n    this.getAllCom();\r\n  },\r\n  methods: {\r\n    //登录弹窗\r\n    login() {\r\n      this.show=true\r\n    },\r\n    //音乐播放\r\n    play() {\r\n      if (this.music) {\r\n        this.$refs.audio.play();\r\n      } else {\r\n         this.$refs.audio.pause();\r\n      }\r\n      this.music = !this.music;\r\n    },\r\n    //获取评论\r\n    getAllCom() {\r\n      getAll(this.Query).then(res => {\r\n        if (res.status === 200) {\r\n          res.data.da.forEach((element, index) => {\r\n            res.data.da[index].bgcolor='#'+Math.random().toString(16).substring(2,8)\r\n            res.data.da[index].one=element.name.substring(0,1)\r\n          });\r\n          if(res.data.da.length<this.Query.size){\r\n            this.loadingPage=false\r\n          }\r\n          if(this.Query.page===0){\r\n            this.arrcom=[]\r\n          }\r\n          this.arrcom=[...this.arrcom,...res.data.da];\r\n        }\r\n      });\r\n    },\r\n    //点击回复操作\r\n    copy(id,name){\r\n      if(this.$store.getters.users.name){\r\n         this.postId=id\r\n      this.content='@回复'+name+':'\r\n      document.getElementsByTagName('textarea')[0].focus()\r\n      }else{\r\n          this.$toast('请先登录');\r\n      }\r\n     \r\n    },\r\n    //弹窗事件\r\n    beforeClose(e,done){\r\n      if(e==='cancel') return done()\r\n      var reg = /^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n      if(this.name.length>=1&&this.password.length>=3&&reg.test(this.email)){\r\n              let data={\r\n                name:this.name,\r\n                email:this.email,\r\n                password:this.password\r\n              }\r\n              logReg(data).then(res=>{\r\n                console.log(res)\r\n                if(res.status===200&&res.data.success){\r\n                  localStorage.setItem('token',res.data.token)\r\n                  //解析token\r\n                  const jwttoken=jwt_decode(res.data.token)\r\n                  let data={\r\n                    jwttoken,\r\n                    done\r\n                  }\r\n                  this.$store.dispatch('saveToken',data)\r\n                }else{\r\n                    this.$toast(res.data.msg)\r\n                      done(false)\r\n                }\r\n              })\r\n      }else{\r\n        this.$toast('格式不正确')\r\n        done(false)\r\n      }\r\n    },\r\n    //发表评论\r\n    postXin(){\r\n      if(this.$store.getters.users.name){\r\n          if(this.content.length>=1){\r\n            this.Query.page=0\r\n            this.loadingPage=true\r\n          let data={\r\n            id:this.postId,\r\n            userid:this.$store.getters.users.id,\r\n            name:this.$store.getters.users.name,\r\n            text:this.content\r\n          }\r\n          postFa(data).then(res=>{\r\n            this.content=''\r\n           this.getAllCom()\r\n          })\r\n         }else{\r\n          this.$toast('评论不能为空');\r\n         }\r\n      }else{\r\n          this.$toast('请先登录');\r\n      }\r\n      \r\n        \r\n    },\r\n    //删除评论\r\n    delposts(id){\r\n      delpost({id}).then(res=>{\r\n        if(res.status===200&&res.data.success){\r\n          this.$toast(res.data.msg)\r\n          this.getAllCom()\r\n        }\r\n      })\r\n    },\r\n    //加载更多\r\n    pageLoading(){\r\n      this.Query.page++;\r\n      this.getAllCom()\r\n    },\r\n    //退出登录\r\n    layout(){\r\n       this.$store.dispatch('layout')\r\n    }\r\n  },\r\n  filters: {\r\n    filters(val) {\r\n      let datime = new Date(val);\r\n      let n = datime.getFullYear();\r\n      let y = (datime.getMonth() + 1).toString().padStart(2, 0);\r\n      let r = datime\r\n        .getDate()\r\n        .toString()\r\n        .padStart(2, 0);\r\n      return `${n}-${y}-${r}`;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n.common {\r\n  color: #787978;\r\n  background: url(\"../../../public/img/bg.3e86f279.jpg\");\r\n  .title {\r\n    text-align: center;\r\n  }\r\n  p {\r\n    padding: 0;\r\n    margin: 0;\r\n  }\r\n  .postcom {\r\n    position: relative;\r\n    box-sizing: border-box;\r\n    .login {\r\n      cursor: pointer;\r\n    }\r\n    .top {\r\n      background-color: rgb(211, 213, 214);\r\n      border-radius: 4px 4px 0 0;\r\n      padding: 5px 4px 5px 8px;\r\n      position: absolute;\r\n      top: 0;\r\n      box-sizing: border-box;\r\n      width: 100%;\r\n      display: flex;\r\n      justify-content: space-between;\r\n    }\r\n    textarea {\r\n      box-sizing: border-box;\r\n      width: 100%;\r\n      border-radius: 4px;\r\n      padding: 36px 4px 0 6px;\r\n    }\r\n    margin: 20px;\r\n    .bottomshow {\r\n      width: 100%;\r\n      .jiazaibtn{\r\n        margin-left: 50%;\r\n        transform: translateX(-50%);\r\n        margin-top: 10PX;\r\n      }\r\n      .del{\r\n        font-weight:400;\r\n        margin-left: 30PX;\r\n        font-size: 20px;\r\n        color: red;\r\n      }\r\n      .show {\r\n        border-bottom: 1px solid #e8e8e8;\r\n        padding-bottom: 50px;\r\n      }\r\n      .com {\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        .hoshows {\r\n          margin-top: 20px;\r\n        }\r\n        .hoshow {\r\n          margin-left: 8px;\r\n          p {\r\n            padding-bottom: 10px;\r\n          }\r\n          .huifu {\r\n            margin-left: 26px;\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n      .icon {\r\n        display: inline-block;\r\n        text-align: center;\r\n        line-height: 50PX;\r\n        border-radius: 50%;\r\n        color: #e8e8e8;\r\n        border: 2PX solid #e8e8e8;\r\n      }\r\n    }\r\n    .van-icon-music-o {\r\n      position: absolute;\r\n      right: 0px;\r\n      top: 126px;\r\n    }\r\n    .musicadd {\r\n      -webkit-animation: haha1 10s linear infinite;\r\n    }\r\n    .dsad {\r\n      -webkit-animation-play-state: paused; //暂停播放\r\n    }\r\n  }\r\n}\r\n@-webkit-keyframes haha1 {\r\n  0% {\r\n    -webkit-transform: rotate(0deg);\r\n  }\r\n  25% {\r\n    -webkit-transform: rotate(90deg);\r\n  }\r\n  50% {\r\n    -webkit-transform: rotate(180deg);\r\n  }\r\n  75% {\r\n    -webkit-transform: rotate(270deg);\r\n  }\r\n  100% {\r\n    -webkit-transform: rotate(360deg);\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./common.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./common.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./common.vue?vue&type=template&id=edbf5336&\"\nimport script from \"./common.vue?vue&type=script&lang=js&\"\nexport * from \"./common.vue?vue&type=script&lang=js&\"\nimport style0 from \"./common.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./common.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./common.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"media/By2.0b464599.mp3\";","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !method || !fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n"],"sourceRoot":""}